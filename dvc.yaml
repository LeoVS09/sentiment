stages:
  train:
    cmd: python -m src.train
    deps:
    - ./src/model.py
    - ./src/normalize.py
    - ./src/train.py
    - data
    params:
    - input.batch_size
    - train.buffer_size
    outs:
    - ./saved_models/main.h5
    metrics:
    - ./metrics/training.csv:
        cache: false
  test:
    cmd: python -m src.test
    deps:
    - data
    - saved_models/main.h5
    - src/normalize.py
    - src/test.py
    params:
      - input.batch_size
    metrics:
    - metrics/test.json:
        cache: false
